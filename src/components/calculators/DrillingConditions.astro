<div class="glass p-8 rounded-2xl w-full max-w-xl mx-auto shadow-2xl">
  <h2 class="text-xl font-bold text-white mb-6">
    Drilling Parameters Calculator
  </h2>

  <div class="space-y-4">
    <!-- Tool Geometry -->
    <div class="grid grid-cols-2 gap-4">
      <div>
        <label class="text-xs text-slate-400">Drill Diameter DC [mm]</label>
        <input id="d" type="number" value="10" class="input" />
      </div>

      <div>
        <label class="text-xs text-slate-400">Cutting Edges Z</label>
        <input id="z" type="number" value="2" class="input" />
      </div>
    </div>

    <!-- Speed -->
    <div class="grid grid-cols-2 gap-4">
      <div>
        <label class="text-xs text-slate-400">Cutting Speed Vc [m/min]</label>
        <input id="vc" type="number" value="100" class="input" />
      </div>

      <div>
        <label class="text-xs text-slate-400">Spindle Speed n [RPM]</label>
        <input id="rpm" type="number" value="3183" class="input" />
      </div>
    </div>

    <!-- Feed -->
    <div class="grid grid-cols-3 gap-4">
      <div>
        <label class="text-xs text-slate-400">Feed vf [mm/min]</label>
        <input id="feed_min" type="number" value="300" class="input" />
      </div>

      <div>
        <label class="text-xs text-slate-400">Feed fr [mm/rev]</label>
        <input id="feed_rev" type="number" value="0.1" class="input" />
      </div>

      <div>
        <label class="text-xs text-slate-400">Feed fz [mm/tooth]</label>
        <div id="feed_tooth" class="output">-</div>
      </div>
    </div>

    <!-- Depth & Time -->
    <div class="grid grid-cols-3 gap-4">
      <div>
        <label class="text-xs text-slate-400">Hole Depth ld [mm]</label>
        <input id="depth" type="number" value="20" class="input" />
      </div>

      <div>
        <label class="text-xs text-slate-400">Drilling Time [min]</label>
        <div id="time_min" class="output">-</div>
      </div>

      <div>
        <label class="text-xs text-slate-400">Drilling Time [s]</label>
        <div id="time_s" class="output">-</div>
      </div>
    </div>
  </div>
</div>

<script>
  const d = document.getElementById("d");
  const z = document.getElementById("z");
  const vc = document.getElementById("vc");
  const rpm = document.getElementById("rpm");
  const feed_min = document.getElementById("feed_min");
  const feed_rev = document.getElementById("feed_rev");
  const feed_tooth = document.getElementById("feed_tooth");
  const depth = document.getElementById("depth");
  const time_min = document.getElementById("time_min");
  const time_s = document.getElementById("time_s");

  function num(el) {
    return parseFloat(el.value) || 0;
  }

  /* --------------------------
     SPEED SYNC
     Vc = π D n / 1000
     n  = (Vc * 1000) / (π D)
  ---------------------------*/

  function syncSpeed(source) {
    const D = num(d);

    if (D === 0) return;

    if (source === "rpm") {
      vc.value = ((Math.PI * D * num(rpm)) / 1000).toFixed(2);
    }

    if (source === "vc" || source === "d") {
      rpm.value = ((num(vc) * 1000) / (Math.PI * D)).toFixed(0);
    }
  }

  /* --------------------------
     FEED SYNC
     vf = fr * n
     fr = vf / n
     fz = fr / Z
  ---------------------------*/

  function syncFeed(source) {
    const nVal = num(rpm);
    const zVal = num(z);

    if (nVal === 0 || zVal === 0) return;

    if (source === "feed_min" || source === "rpm" || source === "z") {
      const fr = num(feed_min) / nVal;
      feed_rev.value = fr.toFixed(3);
      feed_tooth.textContent = (fr / zVal).toFixed(3);
    }

    if (source === "feed_rev") {
      const vf = num(feed_rev) * nVal;
      feed_min.value = vf.toFixed(1);
      feed_tooth.textContent = (num(feed_rev) / zVal).toFixed(3);
    }
  }

  /* --------------------------
     DRILLING TIME
     Tc = ld / vf
  ---------------------------*/

  function calcTime() {
    const vf = num(feed_min);
    const ld = num(depth);

    if (vf === 0) return;

    const tMin = ld / vf;
    time_min.textContent = tMin.toFixed(3);
    time_s.textContent = (tMin * 60).toFixed(1);
  }

  /* --------------------------
     EVENT LISTENERS
  ---------------------------*/

  rpm.addEventListener("input", () => {
    syncSpeed("rpm");
    syncFeed("rpm");
    calcTime();
  });

  vc.addEventListener("input", () => syncSpeed("vc"));
  d.addEventListener("input", () => syncSpeed("d"));

  feed_min.addEventListener("input", () => {
    syncFeed("feed_min");
    calcTime();
  });

  feed_rev.addEventListener("input", () => {
    syncFeed("feed_rev");
    calcTime();
  });

  z.addEventListener("input", () => syncFeed("z"));
  depth.addEventListener("input", calcTime);

  /* Initial calculation */
  syncSpeed("vc");
  syncFeed("feed_min");
  calcTime();
</script>

<style>
  .input {
    width: 100%;
    padding: 6px 10px;
    background: #111827;
    border: 1px solid #1f2937;
    border-radius: 8px;
    color: white;
    font-size: 14px;
  }

  .input:focus {
    outline: none;
    border-color: #3b82f6;
  }

  .output {
    padding: 6px 10px;
    background: #0f172a;
    border: 1px solid #1f2937;
    border-radius: 8px;
    color: white;
    font-size: 14px;
  }
</style>
