---
// CalculatorsAccordion.astro - Loads calculators from const.ts collection
import { CALCULATORS } from "../const";
import DmsConverter from "./calculators/DmsConverter.astro";
import DmsConverterCompact from "./calculators/DmsConverterCompact.astro";
import BarWeight from "./calculators/BarWeight.astro";

// Map calculator IDs to components
const componentMap: Record<string, any> = {
  "dms-converter": DmsConverter,
  "dms-compact": DmsConverterCompact,
  "bar-weight": BarWeight,

  // Add more calculator components here
};

// Build items array with components
const items = CALCULATORS.map((calc) => ({
  title: calc.title,
  component: componentMap[calc.id],
}));
---

<section
  class="glass rounded-2xl overflow-hidden shadow-2xl border border-zinc-800"
  aria-label="Calculator tools"
>
  {
    items.map((item, index) => (
      <details class="group border-b border-zinc-800 last:border-b-0">
        <summary class="py-6 px-4 flex items-center justify-between cursor-pointer transition-colors hover:bg-zinc-900/60 group-open:bg-zinc-900/40 focus:ring-2 focus:ring-inset focus:ring-blue-400 outline-none">
          <span class="text-lg font-bold tracking-tight transition-colors text-slate-100 group-hover:text-white group-open:text-blue-300">
            {item.title}
          </span>
          <svg
            class="w-5 h-5 transition-transform duration-300 text-zinc-600 group-open:rotate-180 group-open:text-blue-400 shrink-0 ml-2"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </summary>
        <div class="px-4 pb-8 border-t border-zinc-800/30">
          <item.component />
        </div>
      </details>
    ))
  }
</section>

<style>
  details > summary::-webkit-details-marker {
    display: none;
  }
</style>
